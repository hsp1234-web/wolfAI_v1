INFO:     Started server process [5996]
INFO:     Waiting for application startup.
{"timestamp": "2025-06-10 05:46:50,942", "level": "INFO", "logger_name": "backend.main", "module": "main", "funcName": "lifespan", "lineno": 111, "message": "JSON Logger \u5df2\u914d\u7f6e\u3002\u5f8c\u7aef\u61c9\u7528\u7a0b\u5f0f\u555f\u52d5\u4e2d..."}
{"timestamp": "2025-06-10 05:46:50,942", "level": "INFO", "logger_name": "backend.main", "module": "main", "funcName": "lifespan", "lineno": 113, "message": "\u5075\u6e2c\u5230\u64cd\u4f5c\u6a21\u5f0f: transient", "props": {"operation_mode": "transient"}}
{"timestamp": "2025-06-10 05:46:50,942", "level": "WARNING", "logger_name": "backend.main", "module": "main", "funcName": "lifespan", "lineno": 124, "message": "\u8a2d\u5b9a\u4e2d\u672a\u627e\u5230 COLAB_GOOGLE_API_KEY\u3002Gemini \u529f\u80fd\u53ef\u80fd\u53d7\u9650\u3002", "props": {"config_issue": "missing_api_key"}}
{"timestamp": "2025-06-10 05:46:50,943", "level": "ERROR", "logger_name": "backend.main", "module": "main", "funcName": "lifespan", "lineno": 137, "message": "\u932f\u8aa4\uff1aGoogle \u670d\u52d9\u5e33\u865f\u6191\u8b49\u672a\u8a2d\u5b9a\u3001\u70ba\u7a7a\u6216\u89e3\u6790\u5931\u6557\u3002Drive \u529f\u80fd\u53ef\u80fd\u53d7\u9650\u3002", "props": {"critical_config_error": "missing_service_account"}}
{"timestamp": "2025-06-10 05:46:50,943", "level": "WARNING", "logger_name": "backend.main", "module": "main", "funcName": "lifespan", "lineno": 141, "message": "\u8b66\u544a\uff1a\u5fc5\u8981\u7684 Google Drive \u8cc7\u6599\u593e ID \u672a\u5728\u8a2d\u5b9a\u4e2d\u5b8c\u6574\u8a2d\u5b9a\u3002Drive \u76f8\u95dc\u6392\u7a0b\u5668\u529f\u80fd\u53ef\u80fd\u53d7\u9650\u3002", "props": {"config_issue": "missing_drive_folder_ids"}}
{"timestamp": "2025-06-10 05:46:50,943", "level": "INFO", "logger_name": "backend.main", "module": "main", "funcName": "lifespan", "lineno": 149, "message": "\u61c9\u7528\u7a0b\u5f0f\u66ab\u5b58\u4e0b\u8f09\u76ee\u9304\u8a2d\u5b9a\u65bc: /app/backend/data/temp_downloads", "props": {"temp_dir": "/app/backend/data/temp_downloads"}}
{"timestamp": "2025-06-10 05:46:50,943", "level": "INFO", "logger_name": "backend.main", "module": "main", "funcName": "lifespan", "lineno": 154, "message": "\u5831\u544a\u8cc7\u6599\u5eab\u8def\u5f91\u8a2d\u5b9a\u70ba: /app/data/reports.sqlite", "props": {"db_path": "/app/data/reports.sqlite"}}
{"timestamp": "2025-06-10 05:46:50,943", "level": "INFO", "logger_name": "backend.main", "module": "main", "funcName": "lifespan", "lineno": 155, "message": "\u63d0\u793a\u8a5e\u8cc7\u6599\u5eab\u8def\u5f91\u8a2d\u5b9a\u70ba: /app/data/prompts.sqlite", "props": {"db_path": "/app/data/prompts.sqlite"}}
{"timestamp": "2025-06-10 05:46:50,943", "level": "INFO", "logger_name": "backend.services.data_access_layer", "module": "data_access_layer", "funcName": "__init__", "lineno": 25, "message": "DataAccessLayer \u914d\u7f6e\u4f7f\u7528\u5831\u544a\u8cc7\u6599\u5eab\u65bc: '/app/data/reports.sqlite' \u53ca\u63d0\u793a\u8a5e\u8cc7\u6599\u5eab\u65bc: '/app/data/prompts.sqlite'.", "props": {"service_name": "DataAccessLayer", "status": "configured", "reports_db": "/app/data/reports.sqlite", "prompts_db": "/app/data/prompts.sqlite"}}
{"timestamp": "2025-06-10 05:46:50,945", "level": "INFO", "logger_name": "backend.services.data_access_layer", "module": "data_access_layer", "funcName": "_create_reports_table", "lineno": 123, "message": "'reports' \u8868\u5df2\u5728 '/app/data/reports.sqlite' \u4e2d\u78ba\u8a8d/\u5275\u5efa\u3002", "props": {"db_table": "reports", "db_path": "/app/data/reports.sqlite"}}
{"timestamp": "2025-06-10 05:46:50,947", "level": "INFO", "logger_name": "backend.services.data_access_layer", "module": "data_access_layer", "funcName": "_create_prompts_table", "lineno": 141, "message": "'prompt_templates' \u8868\u5df2\u5728 '/app/data/prompts.sqlite' \u4e2d\u78ba\u8a8d/\u5275\u5efa\u3002", "props": {"db_table": "prompt_templates", "db_path": "/app/data/prompts.sqlite"}}
{"timestamp": "2025-06-10 05:46:50,947", "level": "INFO", "logger_name": "backend.services.data_access_layer", "module": "data_access_layer", "funcName": "initialize_databases", "lineno": 103, "message": "\u8cc7\u6599\u5eab\u521d\u59cb\u5316\u5b8c\u6210 (\u5982\u679c\u9700\u8981)\u3002", "props": {"operation": "initialize_databases", "status": "completed"}}
{"timestamp": "2025-06-10 05:46:50,947", "level": "INFO", "logger_name": "backend.main", "module": "main", "funcName": "lifespan", "lineno": 159, "message": "DataAccessLayer \u5df2\u521d\u59cb\u5316\u3002", "props": {"service_initialized": "DAL"}}
{"timestamp": "2025-06-10 05:46:50,947", "level": "INFO", "logger_name": "backend.services.parsing_service", "module": "parsing_service", "funcName": "__init__", "lineno": 42, "message": "\u6587\u5b57\u89e3\u6790\u670d\u52d9 (ParsingService) \u5df2\u521d\u59cb\u5316\u3002", "props": {"service_name": "ParsingService", "status": "initialized"}}
{"timestamp": "2025-06-10 05:46:50,947", "level": "INFO", "logger_name": "backend.services.gemini_service", "module": "gemini_service", "funcName": "__init__", "lineno": 36, "message": "Gemini AI \u670d\u52d9 (GeminiService) \u521d\u59cb\u5316\u4e2d...", "props": {"service_name": "GeminiService", "initialization_status": "starting"}}
{"timestamp": "2025-06-10 05:46:50,947", "level": "WARNING", "logger_name": "backend.services.gemini_service", "module": "gemini_service", "funcName": "__init__", "lineno": 64, "message": "\u672a\u5728\u8a2d\u5b9a\u4e2d\u627e\u5230 COLAB_GOOGLE_API_KEY\uff0cGeminiService \u529f\u80fd\u5c07\u53d7\u9650\u3002", "props": {"service_name": "GeminiService", "configuration_status": "api_key_missing"}}
{"timestamp": "2025-06-10 05:46:50,947", "level": "INFO", "logger_name": "backend.main", "module": "main", "funcName": "lifespan", "lineno": 166, "message": "GeminiService \u5df2\u521d\u59cb\u5316 (\u914d\u7f6e\u72c0\u614b: \u672a\u914d\u7f6e/\u91d1\u9470\u7f3a\u5931)\u3002", "props": {"service_initialized": "GeminiService", "configured": false}}
{"timestamp": "2025-06-10 05:46:50,947", "level": "INFO", "logger_name": "backend.main", "module": "main", "funcName": "lifespan", "lineno": 183, "message": "\u66ab\u5b58\u6a21\u5f0f\uff1aGoogleDriveService \u672a\u555f\u7528\u3002", "props": {"mode_details": "transient_drive_skip"}}
{"timestamp": "2025-06-10 05:46:50,947", "level": "INFO", "logger_name": "backend.services.report_ingestion_service", "module": "report_ingestion_service", "funcName": "__init__", "lineno": 36, "message": "\u5831\u544a\u64f7\u53d6\u670d\u52d9 (ReportIngestionService) \u5df2\u521d\u59cb\u5316\u3002", "props": {"service_name": "ReportIngestionService", "status": "initialized"}}
{"timestamp": "2025-06-10 05:46:50,947", "level": "INFO", "logger_name": "backend.main", "module": "main", "funcName": "lifespan", "lineno": 213, "message": "\u66ab\u5b58\u6a21\u5f0f\uff1a\u6392\u7a0b\u5668\u672a\u555f\u7528\u3002", "props": {"scheduler_skipped": true, "reason": "transient_mode"}}
{"timestamp": "2025-06-10 05:46:50,947", "level": "INFO", "logger_name": "backend.main", "module": "main", "funcName": "lifespan", "lineno": 215, "message": "\u5f8c\u7aef\u61c9\u7528\u7a0b\u5f0f\u555f\u52d5\u6d41\u7a0b\u5b8c\u6210\u3002"}
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     127.0.0.1:56568 - "GET /openapi.json HTTP/1.1" 200 OK
